--- installkernel/installkernel-18.ebuild
+++ installkernel/installkernel-18.ebuild
@@ -15,12 +15,15 @@
 LICENSE="GPL-2+"
 SLOT="0"
 KEYWORDS="~alpha amd64 ~arm arm64 hppa ~ia64 ~loong ~m68k ~mips ppc ppc64 ~riscv ~s390 sparc x86 ~x86-linux"
-IUSE="dracut grub module-rebuild systemd uki ukify"
+IUSE="dracut grub module-rebuild +nsw systemd uki ukify"
+
+PATCHES=( "${FILESDIR}"/add-nsw-install-18.patch )
 
 RDEPEND="
+	nsw? ( sys-libs/gentoo-config-files[installkernel] )
 	!<=sys-kernel/installkernel-systemd-3
 	>=sys-apps/debianutils-4.9-r1
-	dracut? ( >=sys-kernel/dracut-060_pre20240104 )
+	dracut? ( >=sys-kernel/dracut-060_pre20240104 sys-libs/gentoo-config-files[initramfs] )
 	grub? ( sys-boot/grub )
 	systemd? (
 		|| (
